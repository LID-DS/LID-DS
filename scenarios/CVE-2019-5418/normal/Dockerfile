FROM debian:10

RUN apt-get update \
    && apt-get install -y wget python3 python3-pip wget unzip xvfb udev

# chrome in debian
RUN echo 'deb http://dl.google.com/linux/chrome/deb/ stable main' >> /etc/apt/sources.list
RUN wget https://dl-ssl.google.com/linux/linux_signing_key.pub
RUN apt-key add linux_signing_key.pub


# python related
RUN pip3 install --upgrade pip setuptools \
    && pip3 install selenium \
    && pip3 install 'urllib3==1.23' --force-reinstall \
    && pip3 install pyvirtualdisplay \
    && pip3 install requests \
    && pip3 install numpy

# install chrome
RUN apt-get update && apt-get install -y google-chrome-stable git \
    && wget https://chromedriver.storage.googleapis.com/2.42/chromedriver_linux64.zip \
    && unzip chromedriver_linux64.zip -d /usr/bin \
    && chmod +x /usr/bin/chromedriver

ADD randomwalk.py /home/randomwalk.py

ENTRYPOINT ["python3", "-u", "/home/randomwalk.py", "-v", "1"]
CMD []
